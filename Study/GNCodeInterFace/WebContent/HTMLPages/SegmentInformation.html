<html>
<style type="text/css">
.dataRow {
	border-bottom: 1px dotted #999999;
	width: 100%;
	vertical-align: middle;
}
</style>
<script language="JavaScript">
function toggleSegment(chk,sourceSegment,segmentChecked){
	var sourceList=[];	
	var sourceListCounter=0;
	for (i = 0; i < chk.length; i++){
		if(chk[i].checked == true){			
			if (!sourceListContains(sourceList,chk[i].sourceSegment)){
				sourceListCounter=sourceListCounter+1;
				sourceList[i]=chk[i].sourceSegment;
			}
	    }else{
	      	
	    }
	}	
	for (i = 0; i < chk.length; i++){
		if (sourceListCounter>1){
			if (chk[i].sourceSegment==sourceSegment&&chk[i].value==segmentChecked){
			   var foundAll = segmentChecked.indexOf('0-1');
			   if (foundAll){
				   for (j = 0; j < chk.length; j++){
				   	  if (chk[j].sourceSegment==sourceSegment){
				   		chk[j].checked=false;
				   	  }
				   }
			   }
			   alert('Max Segments are Selected. More Segment selection not allowed.');
			   chk[i].checked=false;			  
			}
		}
	}
}
function sourceListContains(sourceList, source){
  if (sourceList.length==0)
  	return false;
  for(var i = 0; i < sourceList.length; i++) {
    if(sourceList[i] == source){
      return true;
    }
  }
  return false;
}

function selectAllSegment(chk,sourceSegment,segmentChecked){
	var changeValue = false;
	for (i = 0; i < chk.length; i++){
		if (chk[i].id==segmentChecked){
			changeValue = chk[i].checked;
			break;
		}
	}
	for (i = 0; i < chk.length; i++){
		if (chk[i].sourceSegment==sourceSegment){
			chk[i].checked = changeValue;
		}
	}
	toggleSegment(chk,sourceSegment,segmentChecked);
	
}

function ApplySegment(chk)
{
	
	for (i = 0; i < chk.length; i++){
		var foundAll = chk[i].value.indexOf('0-1')
		if(chk[i].checked == true){	
			if (foundAll<0)	
	      		document.getElementById(chk[i].value+'_div').style.display = 'block';
	    }else{
	    	if (foundAll<0)
	      		document.getElementById(chk[i].value+'_div').style.display = 'none';
	    }
	}
    var divs=[];
    if(document.getElementById('checkBoxDiv1').style.display == 'none'){
    	
    	divs=document.getElementsByTagName('DIV');
    	
    	for (j=0;j<divs.length;j++){
    	    if(divs[j].className=='checkBox'){    			
    			divs[j].style.display = 'inline';
    		}
    		if(divs[j].className=='segmentData'){
    			divs[j].style.display = 'none';
    		}
    	}
	    document.myform.ApplySegments.value='Apply Segments';
    }else{
	    
	    divs=document.getElementsByTagName('DIV');
     	
    	for (j=0;j<divs.length;j++){
    	    if(divs[j].className=='checkBox'){    			
    			divs[j].style.display = 'none';
    		}
    		if(divs[j].className=='segmentData'){    			
    			divs[j].style.display = 'block';
    		}
    	}
	    document.myform.ApplySegments.value='Enable Segment Selection';
    }
    
}
</script>
</html>
<body>
<form name="myform" action="checkboxes.asp" method="post">
<br>
<input type="button" name="ApplySegments" value="Apply Segments" onClick="ApplySegment(document.myform.check_list)">
<hr><br>
<DIV id="source1" class="dataRow" onmouseover="this.style.backgroundColor='#FCB4B5';" onmouseout="this.style.backgroundColor='#FFFFFF';" divid="0">
<div id=sourcediv" style="background-color: gray">
<span title="Source1">Source1</span>
<div style='display:inline' class="checkBox" id="checkBoxDiv1">
<input type="checkbox" name="check_list" id="source1_0-1" value="source1_0-1" sourceSegment="source1" onclick="selectAllSegment(document.myform.check_list,'source1','source1_0-1')">
<input type="checkbox" name="check_list" id="source1_seg0" value="source1_seg0" sourceSegment="source1" onclick="toggleSegment(document.myform.check_list,'source1','source1_seg0')">
<input type="checkbox" name="check_list" id="source1_seg2" value="source1_seg2" sourceSegment="source1" onclick="toggleSegment(document.myform.check_list,'source1','source1_seg2')">
</div>
</div>
<div class="segmentData" style="display: none">
<div id="source1_seg0_div" class="dataRow" >
<span id='segment' title="seg0">Source1 - Segment 0</span><br>
</div>
<div id="source1_seg2_div" class="dataRow" >
<span id='segment' title="seg2">Source1 - Segment 1</span>
</div>
</div>
</DIV>
<DIV id="source2" class="dataRow" onmouseover="this.style.backgroundColor='#FCB4B5';" onmouseout="this.style.backgroundColor='#FFFFFF';" divid="1">
<div id=sourcediv" style="background-color: gray">
<span title="Source2">Source2</span>
<div style='display:inline' class="checkBox" id="checkBoxDiv2">
<input type="checkbox" name="check_list" id="source2_0-1" value="source2_0-1" sourceSegment="source2" onclick="selectAllSegment(document.myform.check_list,'source2','source2_0-1')">
<input type="checkbox" name="check_list" id="source2_seg0" value="source2_seg0" sourceSegment="source2" onclick="toggleSegment(document.myform.check_list,'source2','source2_seg0')">
<input type="checkbox" name="check_list" id="source2_seg1" value="source2_seg1" sourceSegment="source2" onclick="toggleSegment(document.myform.check_list,'source2','source2_seg1')">
</div>
</div>
<div class="segmentData" style="display: none">
<div id="source2_seg0_div" class="dataRow" >
<span id='segment' title="seg0">Source2 - Segment 0</span><br>
</div>
<div id="source2_seg1_div" class="dataRow" >
<span id='segment' title="Source2 - Segment 1This example tests if a string contains a specified word. If the word is found it returns the position of the first character of the word in the original string. Note: The first position in the string is 0!">Source2 - Segment 1This example tests if a string contains a specified word. If the word is found it returns the position of the first character of the word in the original string. Note: The first position in the string is 0!</span>
</div>
</div>
</DIV>
<DIV id="source2" class="dataRow" onmouseover="this.style.backgroundColor='#FCB4B5';" onmouseout="this.style.backgroundColor='#FFFFFF';" divid="1">
<div id=sourcediv" style="background-color: gray">
<span title="Source2">Source2</span>
<div style='display:inline' class="checkBox" id="checkBoxDiv2">
<input type="checkbox" name="check_list" id="source2_0-1" value="source2_0-1" sourceSegment="source2" onclick="selectAllSegment(document.myform.check_list,'source2','source2_0-1')">
<input type="checkbox" name="check_list" id="source2_seg0" value="source2_seg0" sourceSegment="source2" onclick="toggleSegment(document.myform.check_list,'source2','source2_seg0')">
<input type="checkbox" name="check_list" id="source2_seg1" value="source2_seg1" sourceSegment="source2" onclick="toggleSegment(document.myform.check_list,'source2','source2_seg1')">
</div>
</div>
<div class="segmentData" style="display: none">
<div id="source2_seg0_div" class="dataRow" >
<span id='segment' title="seg0">Source2 - Segment 0</span><br>
</div>
<div id="source2_seg1_div" class="dataRow" >
<span id='segment' title="Source2 - Segment 1This example tests if a string contains a specified word. If the word is found it returns the position of the first character of the word in the original string. Note: The first position in the string is 0!">Source2 - Segment 1This example tests if a string contains a specified word. If the word is found it returns the position of the first character of the word in the original string. Note: The first position in the string is 0!</span>
</div>
</div>
</DIV>
</form>
</body>